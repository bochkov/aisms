{% extends 'report/_report.html' %}

{% block header %}
    Журнал работ
{% endblock %}

{% block content %}
    {% include '_form.html' with method='GET' %}

    {% if object_list %}
    <table class="table table-bordered table-condensed table-striped">
        <tr>
            <th>№ п/п</th>
            <th>Тип работ</th>
            <th>Дата работ</th>
            <th>Исполнитель</th>
            <th>Средство измерений</th>
            <th>Результат</th>
            <th>Заказчик</th>
            <th>Свидетельство</th>
        </tr>
        {% for obj in object_list %}
            <tr class="{% if obj.result == False and obj.tipo == 2 %}error{% elif obj.result %}success{% else %}warning{% endif %}">
                <td>{{ forloop.counter }}</td>
                <td>{{ obj.get_tipo_display }}</td>
                <td>{{ obj.date|date:"d.m.Y" }} <small>{{ obj.date|date:"H:i" }}</small></td>
                <td>{{ obj.performer }}</td>
                <td>{{ obj.passport }}</td>
                <td>{{ obj.result|yesno:"Годен,Брак" }}</td>
                <td>{{ obj.passport.owner }}</td>
                <td>{% if obj.document %}<a href='/media/{{ obj.document }}'>{{ obj.document_name }}</a>{% endif %}</td>
            </tr>
        {% endfor %}
    </table>
    {% endif %}
{% endblock %}
