{% extends 'report/_report.html' %}

{% block header %}
    Журнал работ
{% endblock %}

{% block content %}
    <ul class="nav nav-pills">
        <li><a href="?type=">Все</a></li>
        <li><a href="?type=1">Поверка</a></li>
        <li><a href="?type=2">Ремонт</a></li>
        <li><a href="?type=3">Калибровка</a></li>
        <li><a href="?type=4">Аттестация</a></li>
    </ul>

    {% if object_list %}
    <table class="table table-bordered table-condensed table-striped">
        <tr>
            <th>№ п/п</th>
            <th>Тип работ</th>
            <th>Дата работ</th>
            <th>Исполнитель</th>
            <th>Средство измерений</th>
            <th>Результат</th>
            <th>Заказчик</th>
            <th>Свидетельство</th>
        </tr>
    {% for obj in object_list %}
        <tr class="{% if obj.result == False and obj.tipo == 2 %}error{% elif obj.result %}success{% else %}warning{% endif %}">
            <td>{{ forloop.counter }}</td>
            <td>{{ obj.get_tipo_display }}</td>
            <td>{{ obj.date|date:"d.m.Y" }} <small>{{ obj.date|date:"H:i" }}</small></td>
            <td>{{ obj.performer }}</td>
            <td>{{ obj.passport }}</td>
            <td>{{ obj.result|yesno:"Годен,Брак" }}</td>
            <td>{{ obj.passport.owner }}</td>
            <td>{% if obj.document %}<a href='/media/{{ obj.document }}'>{{ obj.document_name }}</a>{% endif %}</td>
        </tr>
    {% endfor %}
    </table>
    {% endif %}
{% endblock %}

{% block custom_js %}
    <script>
    $(function(){
        $('a[href="?type={{ type }}"]').parent().addClass('active');
    })
    </script>
{% endblock %}